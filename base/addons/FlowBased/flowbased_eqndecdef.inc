
EQUATIONS
 QFBNEX(RRR,S,T)                            'Find net exchange for each hub in FB simulation'
 QFBLIM(FBLINE,S,T)                     'PTDF Constraints for each Line'

;


QFBNEX(FBHUB,IS3,T)..

        VFBNEX(FBHUB,IS3,T)
*kas x3v jaoks eraldi v√µrrand? piirata x3v export, import.
        =E=
          SUM(IFBHUB$(IXKINI_Y(FBHUB,IFBHUB) OR IXKN(FBHUB,IFBHUB) OR IXKN(IFBHUB,FBHUB)), VX_T(FBHUB,IFBHUB,IS3,T))
        - SUM(IFBHUB$(IXKINI_Y(IFBHUB,FBHUB) OR IXKN(IFBHUB,FBHUB) OR IXKN(FBHUB,IFBHUB)), VX_T(IFBHUB,FBHUB,IS3,T)*(1-XLOSS(IFBHUB,FBHUB)))
$ifi %X3V%== YES        + SUM(FBX3VHUB$X3VX(FBHUB,FBX3VHUB),SUM(X3VSTEP,VX3VEX_T(FBHUB,FBX3VHUB,X3VSTEP,IS3,T)))
$ifi %X3V%== YES        -  SUM(FBX3VHUB$X3VX(FBHUB,FBX3VHUB),SUM(X3VSTEP,VX3VIM_T(FBHUB,FBX3VHUB,X3VSTEP,IS3,T)))
        + IX3FX_T_Y(FBHUB,IS3,T)$FBX3FXHUB(FBHUB)
                 ;

QFBLIM(FBLINE,IS3,T)..
        SUM(FBHUB,(FBPTDF_VAR_T(IS3,T,FBLINE,FBHUB)*(VFBNEX(FBHUB,IS3,T))))

        =L=
        FBRAM(FBLINE)
                ;
