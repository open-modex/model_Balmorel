* Latest revision 20180418 (hr)
* Coming to here from files for individual equations in folder  base/_addons/_hooks


$ifi %equation%==qeeq             - VQEEQ(IY411,IR,IS3,T,'IMINUS') + VQEEQ(IY411,IR,IS3,T,'IPLUS')
$ifi %equation%==qheq             + VQHEQ(IY411,IA,IS3,T,'IPLUS') - VQHEQ(IY411,IA,IS3,T,'IMINUS')
$ifi %equation%==qhyrsseq         + VQHYRSSEQ(IY411,IA,S,'IPLUS') - VQHYRSSEQ(IY411,IA,S,'IMINUS')
$ifi %equation%==qhyrsminvol      - VQHYRSMINVOL(IY411,IA,S,'IPLUS')
$ifi %equation%==qhyrsmaxvol      - VQHYRSMAXVOL(IY411,IA,S,'IMINUS')
$ifi %equation%==qhymaxg          + VQHYMAXG(IY411,IA,IS3,T,'IMINUS')
$ifi %equation%==qestovolt        - VQESTOVOLT(IY411,IA,IS3,T,'IPLUS') + VQESTOVOLT(IY411,IA,IS3,T,'IMINUS')
$ifi %equation%==qestovolts       - VQESTOVOLTS(IY411,IA,S,T,'IPLUS') + VQESTOVOLTS(IY411,IA,S,T,'IMINUS')
$ifi %equation%==qhstovolt        - VQHSTOVOLT(IY411,IA,IS3,T,'IPLUS') + VQHSTOVOLT(IY411,IA,IS3,T,'IMINUS')
$ifi %equation%==qhstovolts       - VQHSTOVOLTS(IY411,IA,S,T,'IPLUS') + VQHSTOVOLTS(IY411,IA,S,T,'IMINUS')
$ifi %equation%==qkefuelc         + VQKFUEL(IY411,C,FFF)
$ifi %equation%==qkefuelr         + VQKFUEL(IY411,IR,FFF)
$ifi %equation%==qkefuela         + VQKFUEL(IY411,IA,FFF)
$ifi %equation%==qgeqcf           + VQGEQF(IY411,C,FFF,'IPLUS') -  VQGEQF(IY411,C,FFF,'IMINUS')
$ifi %equation%==qgeqrf           + VQGEQF(IY411,IR,FFF,'IPLUS') - VQGEQF(IY411,IR,FFF,'IMINUS')
$ifi %equation%==qgeqaf           + VQGEQF(IY411,IA,FFF,'IPLUS') - VQGEQF(IY411,IA,FFF,'IMINUS')
$ifi %equation%==qktechgroupc     + VQKTECHGROUP(IY411,C,TECH_GROUP)
$ifi %equation%==qktechgroupr     + VQKTECHGROUP(IY411,IR,TECH_GROUP)
$ifi %equation%==qktechgroupa     + VQKTECHGROUP(IY411,IA,TECH_GROUP)
$ifi %equation%==qxk_up           + VQXK_UP(IY411,IRE,IRI,IS3,T,'IMINUS')- VQXK_UP(IY411,IRE,IRI,IS3,T,'IPLUS')
$ifi %equation%==qgknaccumgross   + VQGKNACCUMGROSS(IY411,IA,IGKFIND,'IPLUS') - VQGKNACCUMGROSS(IY411,IA,IGKFIND,'IMINUS')
$ifi %equation%==qgknaccumnet     + VQGKNACCUMNET(IY411,IA,IGKFIND,'IPLUS') - VQGKNACCUMNET(IY411,IA,IGKFIND,'IMINUS')
$ifi %equation%==qxknaccumnet     + VQXKNACCUMNET(IY411,IRE,IRI,'IPLUS') - VQXKNACCUMNET(IY411,IRE,IRI,'IMINUS')
$ifi %equation%==qgke_up          + VQGKE_UP(IY411,IA,IGKENOSTO,IS3,T,'IMINUS')- VQGKE_UP(IY411,IA,IGKENOSTO,IS3,T,'IPLUS')
$ifi %equation%==qgkh_up          + VQGKH_UP(IY411,IA,IGKHNOSTO,IS3,T,'IMINUS')- VQGKH_UP(IY411,IA,IGKHNOSTO,IS3,T,'IPLUS')


$ifi not %equation%==qobj  $goto endoffile

* -- Objective function --------------------------------------------------------
$ifi %equation%==qobj


* Infeasibility penalties:
   + PENALTYQ*(
$ifi %BB1%==yes    +SUM((IA,IS3)$SUM(IGHYRS,IAGKFX(IA,IGHYRS)),(VQHYRSSEQ(IA,IS3,'IMINUS')+VQHYRSSEQ(IA,IS3,'IPLUS')))

$ifi %BB2%==yes       +SUM((IA,IS3)$SUM(IGHYRS,IAGKFX(IA,IGHYRS)),(VQHYRSSEQ(IA,IS3,'IMINUS')+VQHYRSSEQ(IA,IS3,'IPLUS')))
$ifi %BB1%==yes    +SUM((IA,IS3)$SUM(IGHYRS,IAGKFX(IA,IGHYRS)),(VQHYRSMINMAXVOL(IA,IS3,'IMINUS')+VQHYRSMINMAXVOL(IA,IS3,'IPLUS')))
$ifi %BB2%==yes    +SUM((IA,IS3)$SUM(IGHYRS,IAGKFX(IA,IGHYRS)),(VQHYRSMINMAXVOL(IA,IS3,'IMINUS')+VQHYRSMINMAXVOL(IA,IS3,'IPLUS')))
* BB4:

     +SUM((IA,IS3,T)$(SUM(IGHSTO$IAGK_HASORPOT(Y,IA,IGHSTO),1)), (VQHSTOVOLT(Y,IA,IS3,T,'IMINUS')+VQHSTOVOLT(Y,IA,IS3,T,'IPLUS')))
     +SUM((IA,IS3,T)$(SUM(IGESTO$IAGK_HASORPOT(Y,IA,IGESTO),1)), (VQESTOVOLT(Y,IA,IS3,T,'IMINUS')+VQESTOVOLT(Y,IA,IS3,T,'IPLUS')))
     +SUM((IA,IS3,T)$(SUM(IGHSTOS$IAGK_HASORPOT(Y,IA,IGHSTOS),1)), (VQHSTOVOLTS(Y,IA,IS3,T,'IMINUS')+VQHSTOVOLTS(Y,IA,IS3,T,'IPLUS')))
     +SUM((IA,IS3,T)$(SUM(IGESTOS$IAGK_HASORPOT(Y,IA,IGESTOS),1)), (VQESTOVOLTS(Y,IA,IS3,T,'IMINUS')+VQESTOVOLTS(Y,IA,IS3,T,'IPLUS')))
     +SUM((IR,IS3,T), (VQEEQ(Y,IR,IS3,T,'IMINUS')+VQEEQ(Y,IR,IS3,T,'IPLUS')))
     +SUM((IA,IS3,T)$(SUM(DHUSER, IDH_SUMST(IA,DHUSER))), (VQHEQ(Y,IA,IS3,T,'IMINUS')+VQHEQ(Y,IA,IS3,T,'IPLUS')))

     +SUM((IA,IS3)$(SUM(IGHYRS,IAGK_HASORPOT(Y,IA,IGHYRS))),(VQHYRSSEQ(Y,IA,IS3,'IMINUS')+VQHYRSSEQ(Y,IA,IS3,'IPLUS')))
     +SUM((IA,IS3)$(HYRSDATA(IA,"HYRSMINVOL",IS3) AND SUM(IGHYRS$IAGK_HASORPOT(Y,IA,IGHYRS),1)),(VQHYRSMINVOL(Y,IA,IS3,'IPLUS')))
     +SUM((IA,IS3)$(HYRSDATA(IA,"HYRSMAXVOL",IS3) AND SUM(IGHYRS$IAGK_HASORPOT(Y,IA,IGHYRS),1)),(VQHYRSMAXVOL(Y,IA,IS3,'IMINUS')))
     +SUM((IA,IS3,T)$SUM(IGHYRS,IAGK_HASORPOT(Y,IA,IGHYRS)), VQHYMAXG(Y,IA,IS3,T,'IMINUS'))
* TODO: sammenlign med SONYstick:
     +SUM((IA,IGKFIND)$IAGKN(IA,IGKFIND), (VQGKNACCUMNET(Y,IA,IGKFIND,"IPLUS")+VQGKNACCUMNET(Y,IA,IGKFIND,"IMINUS"))) !!TO DO VGKNACCUMNET IS NOT FINISHED
*     +SUM((IA,IGKFIND)$IAGKN(IA,IGKFIND), (VQGKNACCUMGROSS(Y,IA,IGKFIND,"IPLUS")+VQGKNACCUMGROSS(Y,IA,IGKFIND,"IMINUS")))
*     +SUM((IRE,IRI)$IXKN(Y,IRE,IRI), VQXKNACCUMNET(Y,IRE,IRI,"IPLUS")+VQXKNACCUMNET(Y,IRE,IRI,"IMINUS"))  !!TO DO VXKNACCUMNET IS NOT FINISHED  omitted  here
*    +SUM((IRE,IRI)$IXKN(Y,IRE,IRI), VQXKNACCUMGROSS(Y,IRE,IRI,"IPLUS")+VQXKNACCUMGROSS(Y,IRE,IRI,"IMINUS")) !!EQUATION NOT DEFINED

     +SUM((IA,IGDISPATCH(IGKENOSTO),IS3,T)$IAGKN(IA,IGKENOSTO), (VQGKE_UP(Y,IA,IGKENOSTO,IS3,T,'IMINUS')+VQGKE_UP(Y,IA,IGKENOSTO,IS3,T,'IPLUS')))
     +SUM((IA,IGDISPATCH(IGKHNOSTO),IS3,T)$IAGKN(IA,IGKHNOSTO), (VQGKH_UP(Y,IA,IGKHNOSTO,IS3,T,'IMINUS')+VQGKH_UP(Y,IA,IGKHNOSTO,IS3,T,'IPLUS')))
     +SUM((IRE,IRI,IS3,T)$IXK_HASORPOT(Y,IRE,IRI), (VQXK_UP(Y,IRE,IRI,IS3,T,'IMINUS')+VQXK_UP(Y,IRE,IRI,IS3,T,'IPLUS')))

     +SUM((C,FFF)$FKPOT(C,FFF),   VQKFUEL(Y,C,FFF))
     +SUM((IR,FFF)$FKPOT(IR,FFF), VQKFUEL(Y,IR,FFF))
     +SUM((IA,FFF)$FKPOT(IA,FFF), VQKFUEL(Y,IA,FFF))

     +SUM((C,FFF)$IGEQF(Y,C,FFF),   VQGEQF(Y,C,FFF,"IPLUS") + VQGEQF(Y,C,FFF,"IMINUS"))
     +SUM((IR,FFF)$IGEQF(Y,IR,FFF), VQGEQF(Y,IR,FFF,"IPLUS") + VQGEQF(Y,IR,FFF,"IMINUS"))
     +SUM((IA,FFF)$IGEQF(Y,IA,FFF), VQGEQF(Y,IA,FFF,"IPLUS") + VQGEQF(Y,IA,FFF,"IMINUS"))
 
     +SUM((C,TECH_GROUP)$TECHGROUPKPOT(C,TECH_GROUP),   VQKTECHGROUP(Y,C,TECH_GROUP))
     +SUM((IR,TECH_GROUP)$TECHGROUPKPOT(IR,TECH_GROUP), VQKTECHGROUP(Y,IR,TECH_GROUP))
     +SUM((IA,TECH_GROUP)$TECHGROUPKPOT(IA,TECH_GROUP), VQKTECHGROUP(Y,IA,TECH_GROUP))

           )
* -- Objective function End ----------------------------------------------------


$label  endoffile
